<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phân tích chất lượng không khí từ dữ liệu khí tượng</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-chart-line"></i>
                    <h1>Phân tích chất lượng không khí từ dữ liệu khí tượng</h1>
                </div>
                <nav class="nav">
                    <a href="#home" class="nav-link active">Trang chủ</a>
                    <a href="#analysis" class="nav-link">Phân tích</a>
                    <a href="#about" class="nav-link">Giới thiệu</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Hero Section -->
            <section class="hero" id="home">
                <div class="hero-content">
                    <h2 class="hero-title" style="font-size: 2.5rem; font-weight: 700; color: #4CAF50; text-align: center;">Phân tích chất lượng không khí từ dữ liệu khí tượng</h2>
                    <p class="hero-description" style="font-size: 1.2rem; color: #555; text-align: center; margin-top: 10px;">
                        Sử dụng mô hình Random Forest đã được train trên dữ liệu thực tế 
                        để dự đoán và phân tích chất lượng không khí từ các yếu tố khí tượng
                    </p>
            </section>

            <!-- Upload Section -->
            <section class="upload-section" id="analysis">
                <div class="upload-container">
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-content">
                            <i class="fas fa-file-csv upload-icon"></i>
                            <h3>Kéo thả file CSV vào đây</h3>
                            <p>hoặc <span class="upload-link">chọn file từ máy tính</span></p>
                            <input type="file" id="fileInput" accept=".csv" style="display: none;">
                            <div class="supported-formats">
                                <span>Hỗ trợ: CSV với dữ liệu khí tượng</span>
                            </div>
                            <div class="csv-format-info">
                                <h4>Định dạng CSV yêu cầu:</h4>
                                <p>Các cột: T2MDEW, T2M, PS, TQV, TQL, H1000, HLML, RHOA, CIG, WS</p>
                                <a href="#" id="downloadTemplate" class="template-link">
                                    <i class="fas fa-download"></i> Tải mẫu CSV
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="upload-preview" id="uploadPreview" style="display: none;">
                        <div class="preview-info">
                            <h4 id="fileName"></h4>
                            <p id="fileSize"></p>
                            <div class="file-stats" id="fileStats"></div>
                        </div>
                        <button class="remove-file" id="removeFile">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <div class="analyze-section">
                    <button class="analyze-btn" id="analyzeBtn" disabled>
                        <i class="fas fa-search"></i>
                        <span>Phân tích dữ liệu</span>
                        <div class="loading-spinner" id="loadingSpinner" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                    </button>
                </div>
            </section>

            <!-- Results Section -->
            <section class="results-section" id="resultsSection" style="display: none;">
                <div class="results-container">
                    <h3 class="results-title">Kết quả phân tích</h3>
                    
                    <!-- Model Performance -->
                    <div class="model-performance">
                        <h4>Hiệu suất mô hình</h4>
                        <div class="performance-cards">
                            <div class="perf-card">
                                <i class="fas fa-bullseye"></i>
                                <h5>RMSE</h5>
                                <p id="modelRMSE">--</p>
                            </div>
                            <div class="perf-card">
                                <i class="fas fa-chart-line"></i>
                                <h5>R² Score</h5>
                                <p id="modelR2">--</p>
                            </div>
                            <div class="perf-card">
                                <i class="fas fa-database"></i>
                                <h5>Số mẫu</h5>
                                <p id="sampleCount">--</p>
                            </div>
                        </div>
                    </div>

                    <!-- Statistical Analysis -->
                    <div class="statistical-analysis">
                        <h4>Phân tích thống kê</h4>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <h5>PM2.5 Trung bình</h5>
                                <p id="avgPM25">--</p>
                            </div>
                            <div class="stat-card">
                                <h5>PM2.5 Cao nhất</h5>
                                <p id="maxPM25">--</p>
                            </div>
                            <div class="stat-card">
                                <h5>PM2.5 Thấp nhất</h5>
                                <p id="minPM25">--</p>
                            </div>
                            <div class="stat-card">
                                <h5>Độ lệch chuẩn</h5>
                                <p id="stdPM25">--</p>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="charts-section">
                        <div class="chart-container">
                            <h4>Biểu đồ PM2.5 theo thời gian</h4>
                            <canvas id="timeSeriesChart"></canvas>
                        </div>
                        
                        <div class="chart-container">
                            <h4>Phân bố PM2.5</h4>
                            <canvas id="distributionChart"></canvas>
                        </div>
                        
                        <div class="chart-container">
                            <h4>Tương quan với các yếu tố khí tượng</h4>
                            <canvas id="correlationChart"></canvas>
                        </div>
                    </div>

                    <!-- Feature Importance -->
                    <div class="feature-importance">
                        <h4>Tầm quan trọng của các yếu tố</h4>
                        <div class="importance-chart">
                            <canvas id="importanceChart"></canvas>
                        </div>
                    </div>

                    <!-- AQI Analysis -->
                    <div class="aqi-analysis">
                        <h4>Phân tích AQI</h4>
                        <div class="aqi-stats">
                            <div class="aqi-level">
                                <div class="aqi-circle aqi-good">
                                    <span id="aqiGoodCount">0</span>
                                </div>
                                <p>Tốt</p>
                            </div>
                            <div class="aqi-level">
                                <div class="aqi-circle aqi-moderate">
                                    <span id="aqiModerateCount">0</span>
                                </div>
                                <p>Trung bình</p>
                            </div>
                            <div class="aqi-level">
                                <div class="aqi-circle aqi-unhealthy">
                                    <span id="aqiUnhealthyCount">0</span>
                                </div>
                                <p>Không tốt</p>
                            </div>
                            <div class="aqi-level">
                                <div class="aqi-circle aqi-very-unhealthy">
                                    <span id="aqiVeryUnhealthyCount">0</span>
                                </div>
                                <p>Rất không tốt</p>
                            </div>
                        </div>
                    </div>

                    <!-- Image Results Section -->
                    <div class="image-results">
                        <h4>Ảnh phân tích</h4>
                        <div id="resultsContainer" class="results-container">
                            <!-- Images and evaluations will be dynamically added here -->
                        </div>
                    </div>

                    <!-- Download Results -->
                    <div class="download-section">
                        <h4>Tải kết quả</h4>
                        <div class="download-buttons">
                            <button class="download-btn" id="downloadResults">
                                <i class="fas fa-download"></i>
                                Tải báo cáo CSV
                            </button>
                            <button class="download-btn" id="downloadCharts">
                                <i class="fas fa-image"></i>
                                Tải biểu đồ
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- About Section -->
            <section class="about-section" id="about">
                <div class="about-content">
                    <h3>Về ứng dụng</h3>
                    <p>
                        Ứng dụng sử dụng mô hình Random Forest đã được train trên dữ liệu thực tế 
                        từ Hà Nội 2018 để phân tích và dự báo chất lượng không khí. Dựa trên 
                        nghiên cứu về mối tương quan giữa PM2.5 và các yếu tố khí tượng.
                    </p>
                    <div class="features">
                        <div class="feature">
                            <i class="fas fa-database"></i>
                            <h4>Dữ liệu thực tế</h4>
                            <p>AirNow.gov + NOAA + MERRA-2</p>
                        </div>
                        <div class="feature">
                            <i class="fas fa-brain"></i>
                            <h4>AI tiên tiến</h4>
                            <p>Random Forest với RMSE = 20.04</p>
                        </div>
                        <div class="feature">
                            <i class="fas fa-chart-line"></i>
                            <h4>Phân tích chính xác</h4>
                            <p>10 yếu tố khí tượng quan trọng</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-info">
                    <p>&copy; 2024 Phân tích chất lượng không khí. Tất cả quyền được bảo lưu.</p>
                </div>
                <div class="footer-links">
                    <a href="#privacy">Chính sách bảo mật</a>
                    <a href="#terms">Điều khoản sử dụng</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/app.js"></script>
</body>
</html>
